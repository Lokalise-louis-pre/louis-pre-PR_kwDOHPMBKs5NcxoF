"use strict";(globalThis.webpackChunk_lokalise_louis=globalThis.webpackChunk_lokalise_louis||[]).push([[4676],{"./node_modules/@storybook/addon-docs/blocks.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$4:()=>_dist_esm_blocks__WEBPACK_IMPORTED_MODULE_2__.ArgsTable,Xz:()=>_dist_esm_blocks__WEBPACK_IMPORTED_MODULE_2__.Canvas,h_:()=>_dist_esm_blocks__WEBPACK_IMPORTED_MODULE_2__.Meta,hv:()=>_dist_esm_blocks__WEBPACK_IMPORTED_MODULE_2__.DocsContext,oG:()=>_dist_esm_blocks__WEBPACK_IMPORTED_MODULE_2__.Story});var util_deprecate__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/util-deprecate/browser.js"),util_deprecate__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(util_deprecate__WEBPACK_IMPORTED_MODULE_0__),ts_dedent__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ts-dedent/esm/index.js"),_dist_esm_blocks__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/blocks/index.js");util_deprecate__WEBPACK_IMPORTED_MODULE_0___default()((()=>{}),ts_dedent__WEBPACK_IMPORTED_MODULE_1__.C`
    Importing from '@storybook/addon-docs/blocks' is deprecated, import directly from '@storybook/addon-docs' instead:
    
    https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-scoped-blocks-imports
`)()},"./node_modules/@storybook/addon-docs/dist/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$4:()=>_blocks__WEBPACK_IMPORTED_MODULE_0__.ArgsTable,Lo:()=>_blocks__WEBPACK_IMPORTED_MODULE_0__.IconGallery,VZ:()=>_blocks__WEBPACK_IMPORTED_MODULE_0__.ColorPalette,Xz:()=>_blocks__WEBPACK_IMPORTED_MODULE_0__.Canvas,Zu:()=>_blocks__WEBPACK_IMPORTED_MODULE_0__.DocsContainer,_R:()=>_blocks__WEBPACK_IMPORTED_MODULE_0__.IconItem,aT:()=>_blocks__WEBPACK_IMPORTED_MODULE_0__.AddContext,c6:()=>_blocks__WEBPACK_IMPORTED_MODULE_0__.ColorItem,h_:()=>_blocks__WEBPACK_IMPORTED_MODULE_0__.Meta,oG:()=>_blocks__WEBPACK_IMPORTED_MODULE_0__.Story});var _blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/blocks/index.js")},"./.storybook/stories/guides/advanced-usage.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ForceToDocs:()=>ForceToDocs,__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>advanced_usage_stories});var react=__webpack_require__("./node_modules/react/index.js"),esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),dist_esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),public_api=__webpack_require__("./node_modules/@storybook/addons/dist/esm/public_api.js"),core_events_dist_esm=__webpack_require__("./node_modules/@storybook/core-events/dist/esm/index.js"),blocks=__webpack_require__("./node_modules/@storybook/addon-docs/blocks.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const layoutProps={};function MDXContent({components,...props}){return(0,esm.kt)("wrapper",_extends({},layoutProps,props,{components,mdxType:"MDXLayout"}),(0,esm.kt)("h1",{id:"advanced-usage"},"Advanced Usage"),(0,esm.kt)("p",null,"Louis is a fully featured React component library. Simple components can be composed to construct robust frontend applications. To best see this in action, we recommend studying our example repository created over here: ",(0,esm.kt)("a",{parentName:"p",href:"https://github.com/lokalise/louis-demo-cra",target:"_blank",rel:"nofollow noopener noreferrer"},"louis-demo-cra"),". In that repo we demonstrate typical usage of a number of different Louis components working together to create a multi input form."),(0,esm.kt)("h2",{id:"working-with-an-api"},"Working with an API"),(0,esm.kt)("p",null,"If you are creating your own application with Louis, it remains up to you how you handle API interaction. It is not Louis' responsibility to dictate how you achieve this. Generally speaking Louis components expect to receive any data ",(0,esm.kt)("em",{parentName:"p"},"synchronously"),". So let's demonstrate how we can achieve this when waiting for some ",(0,esm.kt)("em",{parentName:"p"},"asynchronous")," API interactions to complete."),(0,esm.kt)("p",null,"For this demonstration we'll abstract away the specifics of how the API is implemented. Let's suppose however that we have the following functions provided by our API layer:"),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * Given a user ID, return a promise which resolves to the User object having that ID.\n */\nconst getUserDetails = (userId: string): Promise<User> => {\n    // This guide is API implementation agnostic\n};\n\n/**\n * Given a User object, post it to the API.\n * The returned promise resolves when the backend confirms the post is complete.\n */\nconst postUserDetails = (user: User): Promise<void> => {\n    // This guide is API implementation agnostic\n};\n")),(0,esm.kt)("p",null,"Then how might we interact with these functions in our UI?"),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-tsx"},'import { Flex, Input, Label, Loading } from \'@lokalise/louis\';\nimport { useCallback, useEffect, useState } from \'react\';\n\nimport { getUserDetails, postUserDetails } from \'../api\';\n\n/**\n * useUserDetails handles state and behaviour for our form.\n * This helps to separate behaviour from rendering.\n */\nconst useUserDetails = (userId: string) => {\n    const [user, setUser] = useState({ name: \'\', email: \'\' });\n\n    // We\'ll use this state to keep track of in progress API calls.\n    const [loading, setLoading] = useState(false);\n\n    // This useEffect manages retrieving user information from the API.\n    // It starts as soon as this component mounts, or any time the userId changes.\n    useEffect(() => {\n        setLoading(true);\n        getUserDetails(userId)\n            .then((userFromBackend) => {\n                setUser(userFromBackend);\n            })\n            .finally(() => setLoading(false));\n    }, [userId]);\n\n    // This function handles form submission.\n    // We immediately update our local state to recognise an async process has started.\n    // We clear the loading state only after the API call resolves.\n    const submitUserDetails = () => {\n        setLoading(true);\n        postUserDetails(user).finally(() => setLoading(false));\n    };\n\n    const onChangeEmail = useCallback<ChangeEventHandler<HTMLInputElement>>(\n        (e) => setUser((u) => ({ ...u, email: e.currentTarget.value })),\n        [],\n    );\n    const onChangeName = useCallback<ChangeEventHandler<HTMLInputElement>>(\n        (e) => setUser((u) => ({ ...u, name: e.currentTarget.value })),\n        [],\n    );\n\n    return {\n        loading,\n        onChangeEmail,\n        onChangeName,\n        submitUserDetails,\n        user,\n    };\n};\n\ntype UserDetailsUpdateFormProps = {\n    userId: string;\n};\n\nconst UserDetailsUpdateForm = ({ userId }: UserDetailsUpdateFormProps) => {\n    const {\n        loading,\n        onChangeEmail,\n        onChangeName,\n        submitUserDetails,\n        user: { email, name },\n    } = useUserDetails(userId);\n\n    // We have an in flight API call, and should wait for it to resolve\n    if (loading) {\n        return <Loading />;\n    }\n\n    // We have loaded user details from the backend.\n    // The user can edit them synchronously as much as they like until they are ready to submit the form.\n    return (\n        <form onSubmit={submitUserDetails}>\n            <Flex direction="column" gap={4}>\n                <Label text="Full name" underline>\n                    <Input name="fullName" value={name} onChange={onChangeName} />\n                </Label>\n                <Label text="E-mail" underline>\n                    <Input\n                        name="email"\n                        type="email"\n                        value={email}\n                        onChange={onChangeEmail}\n                        placeholder="someone@example.com"\n                    />\n                </Label>\n            </Flex>\n        </form>\n    );\n};\n')),(0,esm.kt)("p",null,"This pattern of blocking entirely on form submission might not be acceptable if the API is particularly slow. In such cases we recommend using the Toast component. Here's how you would change the form submission handler above, if you wanted to use the Toast approach instead:"),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-tsx"},"const submitUserDetails = () => {\n    showToast({\n        type: 'info',\n        title: 'Initiated user details upload. This will take just a moment.',\n    });\n    postUserDetails({\n        name: userName,\n        email: userEmail,\n    })\n        .then(() =>\n            showToast({\n                type: 'success',\n                title: 'User details uploaded successfully!',\n            }),\n        )\n        .catch(() => {\n            showToast({\n                type: 'error',\n                title: 'User details upload failed unexpectedly. Please try again.',\n            });\n        });\n};\n")))}function advanced_usage_stories_extends(){return advanced_usage_stories_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},advanced_usage_stories_extends.apply(this,arguments)}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;const ForceToDocs=()=>{const context=(0,react.useContext)(blocks.hv);return window.setTimeout((()=>{public_api.ZP.getChannel().emit(core_events_dist_esm.NAVIGATE_URL,`?path=/docs/${context.id}`)}),0),null},advanced_usage_stories_layoutProps={ForceToDocs};function advanced_usage_stories_MDXContent({components,...props}){return(0,esm.kt)("wrapper",advanced_usage_stories_extends({},advanced_usage_stories_layoutProps,props,{components,mdxType:"MDXLayout"}),(0,esm.kt)(ForceToDocs,{mdxType:"ForceToDocs"}),(0,esm.kt)(dist_esm.h_,{title:"Overview/Guides/Advanced Usage",parameters:{viewMode:"docs",previewTabs:{canvas:{hidden:!0}},controls:{disable:!0},actions:{disable:!0}},mdxType:"Meta"}),(0,esm.kt)(MDXContent,{mdxType:"AdvancedUsage"}))}advanced_usage_stories_MDXContent.displayName="MDXContent",advanced_usage_stories_MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};const componentMeta={title:"Overview/Guides/Advanced Usage",parameters:{viewMode:"docs",previewTabs:{canvas:{hidden:!0}},controls:{disable:!0},actions:{disable:!0}},includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:()=>(0,esm.kt)(dist_esm.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,esm.kt)(advanced_usage_stories_MDXContent,null))};const advanced_usage_stories=componentMeta,__namedExportsOrder=["ForceToDocs","__page"]},"./node_modules/@storybook/addons/dist/esm/public_api.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ZP:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./node_modules/@storybook/addons/dist/esm/index.js").KP}}]);
//# sourceMappingURL=guides-advanced-usage-stories-mdx.328006e8.iframe.bundle.js.map